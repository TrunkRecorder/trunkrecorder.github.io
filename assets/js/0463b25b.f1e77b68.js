"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[825],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>g});var a=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var s=a.createContext({}),u=function(e){var t=a.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},c=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=u(r),m=n,g=p["".concat(s,".").concat(m)]||p[m]||d[m]||o;return r?a.createElement(g,i(i({ref:t},c),{},{components:r})):a.createElement(g,i({ref:t},c))}));function g(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:n,i[1]=l;for(var u=2;u<o;u++)i[u]=r[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,r)}m.displayName="MDXCreateElement"},2411:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>u});var a=r(7462),n=(r(7294),r(3905));const o={sidebar_label:"Debugging",sidebar_position:6},i="How to Debug a Seg Fault",l={unversionedId:"DEBUG",id:"DEBUG",title:"How to Debug a Seg Fault",description:"When Trunk Recorder crashes and give a Segmentation Fault error (a SegFault), there are some steps you can take to figure out what is causing it. Pulling this information makes it a lot easier to figure what is going wrong.",source:"@site/docs/DEBUG.md",sourceDirName:".",slug:"/DEBUG",permalink:"/docs/DEBUG",draft:!1,editUrl:"https://github.com/TrunkRecorder/trunkrecorder.github.io/tree/main/docs/DEBUG.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_label:"Debugging",sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"Playback",permalink:"/docs/Playback"},next:{title:"OpenMHz",permalink:"/docs/OpenMHz"}},s={},u=[{value:"Recording off an RTL-SDR",id:"recording-off-an-rtl-sdr",level:2},{value:"Playback in GQRX",id:"playback-in-gqrx",level:2},{value:"Playing an IQ File as a Source in Trunk Recorder",id:"playing-an-iq-file-as-a-source-in-trunk-recorder",level:2}],c={toc:u},p="wrapper";function d(e){let{components:t,...o}=e;return(0,n.kt)(p,(0,a.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"how-to-debug-a-seg-fault"},"How to Debug a Seg Fault"),(0,n.kt)("p",null,"When Trunk Recorder crashes and give a Segmentation Fault error (a SegFault), there are some steps you can take to figure out what is causing it. Pulling this information makes it a lot easier to figure what is going wrong."),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"In the terminal where you are going to be running Trunk Recorder, change the limit on Core Dumps, which lets Linux record what was happening at the time of the crash:")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"ulimit -c unlimited\n")),(0,n.kt)("ol",{start:2},(0,n.kt)("li",{parentName:"ol"},"Next, rebuild Trunk Recorder with extra debug information information include. To do this, add ",(0,n.kt)("inlineCode",{parentName:"li"},"-DCMAKE_BUILD_TYPE=Debug")," to the ",(0,n.kt)("strong",{parentName:"li"},"cmake")," command as part of the build process. After you do that, run ",(0,n.kt)("inlineCode",{parentName:"li"},"make")," again. For example, if your build directory was in the Trunk Recorder directory, run:")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"cmake -DCMAKE_BUILD_TYPE=Debug ../\nmake\n")),(0,n.kt)("ol",{start:3},(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Before you start Trunk Recorder, delete any old ",(0,n.kt)("strong",{parentName:"p"},"core")," files that may be in the directory.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Startup Trunk Recorder and wait for a crash...")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"After a crash, use the ",(0,n.kt)("strong",{parentName:"p"},"gdb")," program to unpack the ",(0,n.kt)("strong",{parentName:"p"},"core")," file that was generated during the crash."))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"gdb trunk-recorder core\n")),(0,n.kt)("ol",{start:6},(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("em",{parentName:"li"},"gdb")," is a powerful debugging platform. However, all we need is a trace of the crash. After ",(0,n.kt)("em",{parentName:"li"},"gdb")," has finished loading, type in ",(0,n.kt)("inlineCode",{parentName:"li"},"bt full")," to get a trace. Copy all of the output from ",(0,n.kt)("em",{parentName:"li"},"gdb")," into a new ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/TrunkRecorder/trunk-recorder/issues/new"},"GitHub Issue"),", along with as much information as possible on what maybe causing the crash.")),(0,n.kt)("h1",{id:"how-to-capture-an-iq-sample"},"How to Capture an IQ Sample"),(0,n.kt)("p",null,"When you are testing and debugging, it can be helpful to have recordings of different types of radio systems and transmissions. IQ is the raw data format that comes from an SDR. You can record this to disk and then play it back later or share it to help other debug your problem."),(0,n.kt)("h2",{id:"recording-off-an-rtl-sdr"},"Recording off an RTL-SDR"),(0,n.kt)("p",null,"RTL-SDRs have a built in program for capturing IQ samples. If you have install the ",(0,n.kt)("inlineCode",{parentName:"p"},"rtl-sdr")," package, it comes with the ",(0,n.kt)("inlineCode",{parentName:"p"},"rtl_sdr")," program. "),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"rtl_sdr, an I/Q recorder for RTL2832 based DVB-T receivers\n\nUsage:   -f frequency_to_tune_to [Hz]\n    [-s samplerate (default: 2048000 Hz)]\n    [-d device_index (default: 0)]\n    [-g gain (default: 0 for auto)]\n    [-p ppm_error (default: 0)]\n    [-b output_block_size (default: 16 * 16384)]\n    [-n number of samples to read (default: 0, infinite)]\n    [-S force sync output (default: async)]\n    filename (a '-' dumps samples to stdout)\n")),(0,n.kt)("p",null,"Use the settings from the source you are interested in from your config.json file. For example to record:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-json"},'    "sources": [ {\n        "center": 855700000,\n        "rate": 2048000,\n        "error": 0,\n        "gain": 39,\n        "digitalRecorders": 4,\n        "driver": "osmosdr",\n        "device": "rtl=41"\n    } ]\n')),(0,n.kt)("p",null,"you would use: ",(0,n.kt)("inlineCode",{parentName:"p"},"rtl_sdr -f 855700000 -s 2048000 -g 39 -d 41 debug.iq")),(0,n.kt)("p",null,"The file that rtl_sdr generates is in a compact format... which is great but it can't easily be opened by other program. There is a good write-up on it from here (from 2014!). Luckily, some wrote a small program to convert it into a more standard format (complex IQ). I have included it in the /utils folder: ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/TrunkRecorder/trunk-recorder/blob/master/utils/rtlsdr-to-iq.c"},"rtlsdr-to-iq.c"),". Compile the program and then copy it to the directory with your recordings and run it against them. Note - the conversion will cause the filesize to increase 4x, so make sure you have enough space."),(0,n.kt)("h2",{id:"playback-in-gqrx"},"Playback in GQRX"),(0,n.kt)("p",null,"GQRX can playback files that are in the IQ Complex format. In GQRX, select IQ File as the source:\n",(0,n.kt)("img",{alt:"gqrx file",src:r(5524).Z,width:"758",height:"1070"})),(0,n.kt)("p",null,"You are then going to need a device string with the correct options. Update this to match where your file is and its parameters:"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"file=/Users/luke/Projects/TrunkRecorder/debug.iq,freq=855700000,rate=2048000,repeat=true,throttle=true")),(0,n.kt)("h2",{id:"playing-an-iq-file-as-a-source-in-trunk-recorder"},"Playing an IQ File as a Source in Trunk Recorder"),(0,n.kt)("p",null,"Check out the ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/TrunkRecorder/trunk-recorder/blob/master/examples/config-iq-file.json"},"config-iq-file.json")," config as an example of how to playback an IQ file as a Source. You will probably need to have the ",(0,n.kt)("inlineCode",{parentName:"p"},"repeat")," parameter turned on, unless you have a really long file."))}d.isMDXComponent=!0},5524:(e,t,r)=>{r.d(t,{Z:()=>a});const a=r.p+"assets/images/gqrx-file-ac8f2cdc81537e76af3377b8b7fd994b.png"}}]);